{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","src/untils.ts","src/wave.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","getColor","colorHex","color","that","test","aColor","replace","split","strHex","hex","Number","toString","aNum","numHex","colorRgb","opacity","sColor","toLowerCase","sColorNew","slice","concat","sColorChange","push","parseInt","join","untils_1","Wave","container","options","this","document","querySelector","Object","assign","number","smooth","velocity","height","colors","border","show","width","position","lines","frame","step","status","init","draw","prototype","canvas","createElement","appendChild","offsetWidth","offsetHeight","ctx","getContext","setLines","animate","pause","cancelAnimationFrame","setOptions","reset","_this","getWaveHeight","clearRect","forEach","line","index","angle","Math","PI","leftHeight","sin","rightHeight","cos","vertexs","getVertexs","fillStyle","rgba","beginPath","moveTo","lineWidth","strokeStyle","bezierCurveTo","stroke","lineTo","closePath","fill","requestAnimationFrame","canvasHeight","canvasWidth","waveHeight","window","default"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,iECAAA,EAAAK,SAAA,WACE,MAAO,CAAC,uBAAwB,sBAAuB,uBAIzDL,EAAAM,SAAA,SAAyBC,GACvB,IAAIC,EAAOD,EAIX,GAAI,aAAaE,KAAKD,GAAO,CAG3B,IAFA,IAAIE,EAASF,EAAKG,QAAQ,sBAAuB,IAAIC,MAAM,KACvDC,EAAS,IACJtB,EAAI,EAAGA,EAAImB,EAAOR,OAAQX,IAAK,CACtC,IAAIuB,EAAMC,OAAOL,EAAOnB,IAAIyB,SAAS,IACjCF,EAAIZ,OAAS,IACfY,EAAM,IAAMA,GAEdD,GAAUC,EAKZ,OAHsB,IAAlBD,EAAOX,SACTW,EAASL,GAEJK,EACF,GAhBG,qCAgBKJ,KAAKD,GAAO,CACzB,IAAIS,EAAOT,EAAKG,QAAQ,IAAK,IAAIC,MAAM,IACvC,GAAoB,IAAhBK,EAAKf,OACP,OAAOM,EACF,GAAoB,IAAhBS,EAAKf,OAAc,CAC5B,IAAIgB,EAAS,IACb,IAAS3B,EAAI,EAAGA,EAAI0B,EAAKf,OAAQX,GAAK,EACpC2B,GAAWD,EAAK1B,GAAK0B,EAAK1B,GAE5B,OAAO2B,GAGX,OAAOV,GAGTR,EAAAmB,SAAA,SAAyBZ,EAAaa,GACpC,IAAIC,EAASd,EAAMe,cAInB,GAAID,GAFM,qCAEQZ,KAAKY,GAAS,CAC9B,GAAsB,IAAlBA,EAAOnB,OAAc,CAEvB,IADA,IAAIqB,EAAY,IACPhC,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1BgC,GAAaF,EAAOG,MAAMjC,EAAGA,EAAI,GAAGkC,OAAOJ,EAAOG,MAAMjC,EAAGA,EAAI,IAEjE8B,EAASE,EAGX,IAAIG,EAAe,GACnB,IAASnC,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1BmC,EAAaC,KAAKC,SAAS,KAAOP,EAAOG,MAAMjC,EAAGA,EAAI,KAExD,MAAO,QAAQmC,EAAaG,KAAK,KAAI,IAAIT,EAAO,IAElD,OAAOC,yFC1DT,IAAAS,EAAApC,EAAA,YAEAqC,EAAA,WAUE,SAAAA,EAAYC,EAAmBC,GAgB7BC,KAAKF,UAAYG,SAASC,cAAcJ,GACxCE,KAAKD,QAAUI,OAAOC,OAhBD,CACnBC,OAAQ,EACRC,OAAQ,GACRC,SAAU,EACVC,OAAQ,GACRC,OAAQ,CAAC,WACTC,OAAQ,CACNC,MAAM,EACNC,MAAO,EACPvC,MAAO,IAETa,QAAS,GACT2B,SAAU,UAI+Bd,GAC3CC,KAAKc,MAAQ,GACbd,KAAKe,MAAQ,KACbf,KAAKgB,KAAO,EACZhB,KAAKiB,OAAS,QAEdjB,KAAKkB,OACLlB,KAAKmB,OAkLT,OA/KUtB,EAAAuB,UAAAF,KAAR,WACE,GAA+C,OAA3ClB,KAAKF,UAAUI,cAAc,UAAoB,CACnD,IAAMmB,EAASpB,SAASqB,cAAc,UACtCtB,KAAKF,UAAUyB,YAAYF,GAG7BrB,KAAKqB,OAASrB,KAAKF,UAAUI,cAAc,UAE3CF,KAAKqB,OAAOT,MAAQZ,KAAKF,UAAU0B,YACnCxB,KAAKqB,OAAOb,OAASR,KAAKF,UAAU2B,aAEpCzB,KAAK0B,IAAM1B,KAAKqB,OAAOM,WAAW,MAElC3B,KAAK4B,YAGA/B,EAAAuB,UAAAS,QAAP,WACE7B,KAAKiB,OAAS,YACdjB,KAAKmB,QAGAtB,EAAAuB,UAAAU,MAAP,WACEC,qBAAqB/B,KAAKe,OAC1Bf,KAAKe,MAAQ,KACbf,KAAKiB,OAAS,SAGTpB,EAAAuB,UAAAY,WAAP,SAAkBjC,GAChBC,KAAKD,QAAUI,OAAOC,OAAOJ,KAAKD,QAASA,GAC3CC,KAAK4B,WACe,UAAhB5B,KAAKiB,QACPjB,KAAKmB,QAIFtB,EAAAuB,UAAAa,MAAP,WACEjC,KAAKkB,OACLlB,KAAKiC,SAGCpC,EAAAuB,UAAAD,KAAR,WAAA,IAAAe,EAAAlC,KACQqB,EAASrB,KAAKqB,OACdK,EAAM1B,KAAK0B,IACXlB,EAASR,KAAKmC,gBAEpBT,EAAIU,UAAU,EAAG,EAAGf,EAAOT,MAAOS,EAAOb,QACzCR,KAAKgB,MAAQhB,KAAKD,QAAQQ,SAE1BP,KAAKc,MAAMuB,QAAQ,SAACC,EAAMC,GACxB,IAAMC,GAASN,EAAKlB,KAAe,IAARuB,EAAcL,EAAKpB,MAAM9C,QAAUyE,KAAKC,GAAK,IAClEC,EAAaF,KAAKG,IAAIJ,GAASN,EAAKnC,QAAQO,OAC5CuC,EAAcJ,KAAKK,IAAIN,GAASN,EAAKnC,QAAQO,OAE7CyC,EAAUb,EAAKc,WAAWL,EAAYE,GAE5CnB,EAAIuB,UAAYX,EAAKY,KACrBxB,EAAIyB,YAEJzB,EAAI0B,OAAOL,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IAEjCb,EAAKnC,QAAQW,OAAOC,OACtBe,EAAI2B,UAAYnB,EAAKnC,QAAQW,OAAOE,MACpCc,EAAI4B,YAAcpB,EAAKnC,QAAQW,OAAOrC,MAAQ6D,EAAKnC,QAAQW,OAAOrC,MAAQiE,EAAK1D,KAGnD,SAA1BsD,EAAKnC,QAAQc,UAAiD,UAA1BqB,EAAKnC,QAAQc,SACnDa,EAAI6B,cACF/C,EAASmC,EAAaT,EAAKnC,QAAQO,OACnCe,EAAOb,OAAS,EAChBA,EAASqC,EAAcX,EAAKnC,QAAQO,OACpCe,EAAOT,MAAQ,EACfmC,EAAQ,GAAG,GACXA,EAAQ,GAAG,IAEbrB,EAAI6B,cAAclC,EAAOT,MAAQ,EAC/BJ,EAASmC,EAAaT,EAAKnC,QAAQO,OACnCe,EAAOT,MAAQ,EACfJ,EAASqC,EAAcX,EAAKnC,QAAQO,OACpCyC,EAAQ,GAAG,GACXA,EAAQ,GAAG,IAGXb,EAAKnC,QAAQW,OAAOC,MACtBe,EAAI8B,SAEN9B,EAAI+B,OAAOV,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IACrCrB,EAAI+B,OAAOV,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IACrCrB,EAAI+B,OAAOV,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IACrCrB,EAAIgC,YACJhC,EAAIiC,SAGN,IAAIrF,EAAO0B,KACS,cAAhBA,KAAKiB,SACPjB,KAAKe,MAAQ6C,sBAAsB,WACjCtF,EAAK6C,WAKHtB,EAAAuB,UAAAQ,SAAR,WACE5B,KAAKc,MAAQ,GACb,IAAK,IAAIzD,EAAI,EAAGA,EAAI2C,KAAKD,QAAQM,OAAQhD,IAAK,CAC5C,IAAMgB,EAAQ2B,KAAKD,QAAQU,OAAOpD,EAAI2C,KAAKD,QAAQU,OAAOzC,QACpDsE,EAAO,CACX1D,IAAKgB,EAAAxB,SAAeC,GACpB6E,KAAMtD,EAAAX,SAAeZ,EAAQ2B,KAAKD,QAAQb,UAE5Cc,KAAKc,MAAMrB,KAAK6C,KAIZzC,EAAAuB,UAAA4B,WAAR,SAAmBL,EAAoBE,GACrC,IAAMgB,EAAe7D,KAAKqB,OAAOb,OAC3BsD,EAAc9D,KAAKqB,OAAOT,MAE5BmD,EAAa/D,KAAKmC,gBAEtB,OAAQnC,KAAKD,QAAQc,UACnB,IAAK,SACH,MAAO,CACL,CAAC,EAAGkD,EAAapB,GACjB,CAACmB,EAAaC,EAAalB,GAC3B,CAACiB,EAAaD,GACd,CAAC,EAAGA,IAER,IAAK,MACH,MAAO,CACL,CAAC,EAAGE,EAAapB,GACjB,CAACmB,EAAaC,EAAalB,GAC3B,CAACiB,EAAa,GACd,CAAC,EAAG,IAER,IAAK,OACH,MAAO,CACL,CAACC,EAAapB,EAAY,GAC1B,CAACoB,EAAalB,EAAagB,GAC3B,CAAC,EAAGA,GACJ,CAAC,EAAG,IAER,IAAK,QACH,MAAO,CACL,CAACE,EAAapB,EAAY,GAC1B,CAACoB,EAAalB,EAAagB,GAC3B,CAACC,EAAaD,GACd,CAACC,EAAa,MAKdjE,EAAAuB,UAAAe,cAAR,WACE,GAA0B,EAAtBnC,KAAKD,QAAQS,OACf,OAAQR,KAAKD,QAAQc,UACnB,IAAK,SACH,OAAOb,KAAKqB,OAAOb,OAASR,KAAKD,QAAQS,OAC3C,IAAK,MAEL,IAAK,OACH,OAAOR,KAAKD,QAAQS,OACtB,IAAK,QACH,OAAOR,KAAKqB,OAAOT,MAAQZ,KAAKD,QAAQS,YAG5C,OAAQR,KAAKD,QAAQc,UACnB,IAAK,SACH,OAAOb,KAAKqB,OAAOb,QAAU,EAAIR,KAAKD,QAAQS,QAChD,IAAK,MACH,OAAOR,KAAKqB,OAAOb,OAASR,KAAKD,QAAQS,OAC3C,IAAK,OACH,OAAOR,KAAKqB,OAAOT,MAAQZ,KAAKD,QAAQS,OAC1C,IAAK,QACH,OAAOR,KAAKqB,OAAOT,OAAS,EAAIZ,KAAKD,QAAQS,UAIvDX,EApNA,GAsNMmE,OAAQnE,KAAOA,EAErB/B,EAAAmG,QAAepE","file":"wave.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export function getColor(): Array<string> {\n  return ['rgba(162,237,246,.2)', 'rgba(31,166,196,.2)', 'rgba(13,71,130,.2)']\n}\n\n\nexport function colorHex(color:string):string {\n  var that = color\n  //十六进制颜色值的正则表达式\n  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/\n  // 如果是rgb颜色表示\n  if (/^(rgb|RGB)/.test(that)) {\n    var aColor = that.replace(/(?:\\(|\\)|rgb|RGB)*/g, \"\").split(\",\")\n    var strHex = \"#\"\n    for (var i = 0; i < aColor.length; i++) {\n      var hex = Number(aColor[i]).toString(16)\n      if (hex.length < 2) {\n        hex = '0' + hex\n      }\n      strHex += hex\n    }\n    if (strHex.length !== 7) {\n      strHex = that\n    }\n    return strHex\n  } else if (reg.test(that)) {\n    var aNum = that.replace(/#/, \"\").split(\"\")\n    if (aNum.length === 6) {\n      return that\n    } else if (aNum.length === 3) {\n      var numHex = \"#\"\n      for (var i = 0; i < aNum.length; i += 1) {\n        numHex += (aNum[i] + aNum[i])\n      }\n      return numHex\n    }\n  }\n  return that\n}\n\nexport function colorRgb(color:string,opacity:number):string {\n  var sColor = color.toLowerCase()\n  //十六进制颜色值的正则表达式\n  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/\n  // 如果是16进制颜色\n  if (sColor && reg.test(sColor)) {\n    if (sColor.length === 4) {\n      var sColorNew = \"#\"\n      for (var i = 1; i < 4; i += 1) {\n        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1))\n      }\n      sColor = sColorNew\n    }\n    //处理六位的颜色值\n    var sColorChange = []\n    for (var i = 1; i < 7; i += 2) {\n      sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)))\n    }\n    return `rgba(${sColorChange.join(\",\")},${opacity})`\n  }\n  return sColor\n}\n","import {Core, Options} from \"./interface\";\nimport {getColor, colorHex, colorRgb} from \"./untils\"\n\nclass Wave implements Core {\n  container: HTMLElement\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  options: Options\n  lines: Array<{ hex: string, rgba: string }>\n  step: number\n  frame: number | null\n  status: 'animating' | 'pause'\n\n  constructor(container: string, options?: Options) {\n    const originOption = {\n      number: 3,\n      smooth: 50,\n      velocity: 1,\n      height: .3,\n      colors: ['#ff7657'],\n      border: {\n        show: false,\n        width: 2,\n        color: ''\n      },\n      opacity: .5,\n      position: 'bottom',\n    }\n\n    this.container = document.querySelector(container)\n    this.options = Object.assign(originOption, options)\n    this.lines = []\n    this.frame = null\n    this.step = 0\n    this.status = 'pause'\n\n    this.init()\n    this.draw()\n  }\n\n  private init() {\n    if (this.container.querySelector('canvas') === null) {\n      const canvas = document.createElement('canvas')\n      this.container.appendChild(canvas)\n    }\n\n    this.canvas = this.container.querySelector('canvas')\n\n    this.canvas.width = this.container.offsetWidth\n    this.canvas.height = this.container.offsetHeight\n\n    this.ctx = this.canvas.getContext('2d')\n\n    this.setLines()\n  }\n\n  public animate() {\n    this.status = 'animating'\n    this.draw()\n  }\n\n  public pause() {\n    cancelAnimationFrame(this.frame)\n    this.frame = null\n    this.status = 'pause'\n  }\n\n  public setOptions(options: Object) {\n    this.options = Object.assign(this.options, options)\n    this.setLines()\n    if (this.status === 'pause') {\n      this.draw()\n    }\n  }\n\n  public reset(){\n    this.init()\n    this.reset()\n  }\n\n  private draw() {\n    const canvas = this.canvas\n    const ctx = this.ctx\n    const height = this.getWaveHeight()\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.step += this.options.velocity\n\n    this.lines.forEach((line, index) => {\n      const angle = (this.step + index * 180 / this.lines.length) * Math.PI / 180\n      const leftHeight = Math.sin(angle) * this.options.smooth\n      const rightHeight = Math.cos(angle) * this.options.smooth\n\n      const vertexs = this.getVertexs(leftHeight, rightHeight)\n\n      ctx.fillStyle = line.rgba\n      ctx.beginPath()\n\n      ctx.moveTo(vertexs[0][0], vertexs[0][1])\n\n      if (this.options.border.show) {\n        ctx.lineWidth = this.options.border.width\n        ctx.strokeStyle = this.options.border.color ? this.options.border.color : line.hex\n      }\n\n      if (this.options.position === 'left' || this.options.position === 'right') {\n        ctx.bezierCurveTo(\n          height + leftHeight - this.options.smooth,\n          canvas.height / 2,\n          height + rightHeight - this.options.smooth,\n          canvas.width / 2,\n          vertexs[1][0],\n          vertexs[1][1])\n      } else {\n        ctx.bezierCurveTo(canvas.width / 2,\n          height + leftHeight - this.options.smooth,\n          canvas.width / 2,\n          height + rightHeight - this.options.smooth,\n          vertexs[1][0],\n          vertexs[1][1])\n      }\n\n      if (this.options.border.show) {\n        ctx.stroke()\n      }\n      ctx.lineTo(vertexs[2][0], vertexs[2][1])\n      ctx.lineTo(vertexs[3][0], vertexs[3][1])\n      ctx.lineTo(vertexs[0][0], vertexs[0][1])\n      ctx.closePath()\n      ctx.fill()\n    })\n\n    var that = this;\n    if (this.status === 'animating') {\n      this.frame = requestAnimationFrame(function () {\n        that.draw()\n      })\n    }\n  }\n\n  private setLines() {\n    this.lines = []\n    for (let i = 0; i < this.options.number; i++) {\n      const color = this.options.colors[i % this.options.colors.length]\n      const line = {\n        hex: colorHex((<any>color)),\n        rgba: colorRgb((<any>color), this.options.opacity)\n      }\n      this.lines.push(line)\n    }\n  }\n\n  private getVertexs(leftHeight: number, rightHeight: number): number[][] {\n    const canvasHeight = this.canvas.height\n    const canvasWidth = this.canvas.width\n\n    let waveHeight = this.getWaveHeight()\n\n    switch (this.options.position) {\n      case 'bottom':\n        return [\n          [0, waveHeight + leftHeight],\n          [canvasWidth, waveHeight + rightHeight],\n          [canvasWidth, canvasHeight],\n          [0, canvasHeight]\n        ]\n      case 'top':\n        return [\n          [0, waveHeight + leftHeight],\n          [canvasWidth, waveHeight + rightHeight],\n          [canvasWidth, 0],\n          [0, 0],\n        ]\n      case 'left':\n        return [\n          [waveHeight + leftHeight, 0],\n          [waveHeight + rightHeight, canvasHeight],\n          [0, canvasHeight],\n          [0, 0],\n        ]\n      case 'right':\n        return [\n          [waveHeight + leftHeight, 0],\n          [waveHeight + rightHeight, canvasHeight],\n          [canvasWidth, canvasHeight],\n          [canvasWidth, 0],\n        ]\n    }\n  }\n\n  private getWaveHeight(): number {\n    if (this.options.height > 1) {\n      switch (this.options.position) {\n        case 'bottom':\n          return this.canvas.height - this.options.height\n        case 'top':\n          return this.options.height\n        case 'left':\n          return this.options.height\n        case 'right':\n          return this.canvas.width - this.options.height\n      }\n    } else {\n      switch (this.options.position) {\n        case 'bottom':\n          return this.canvas.height * (1 - this.options.height)\n        case 'top':\n          return this.canvas.height * this.options.height\n        case 'left':\n          return this.canvas.width * this.options.height\n        case 'right':\n          return this.canvas.width * (1 - this.options.height)\n      }\n    }\n  }\n}\n\n(<any>window).Wave = Wave\n\nexport default Wave\n"]}